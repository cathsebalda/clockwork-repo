@using Clockwork.Web.Models
@model HomeModel
<script>
    function UserAction() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("output").innerHTML = this.responseText;
            }
        };
        xhttp.open("GET", "http://localhost:60256/api/currenttime", true);
        xhttp.setRequestHeader("Content-type", "application/json");
        xhttp.send();

    }

    function GetTime() {
        url = "/Home/GetTime";
        $.ajax({
            url: url,
            data: '',
            type: 'GET',
            cache: false,
            datatype: 'html',
            success: function (response) {
                GetListPartial();
            },
            error: function (request, status, error) { },
            complete: function () {

            }
        });
    }

    function GetListPartial() {
        url = "/Home/GetList";
        $.ajax({
            url: url,
            data: '',
            type: 'GET',
            cache: false,
            datatype: 'html',
            success: function (response) {
                $('#GridContainer').html('');
                $('#GridContainer').html(response);
            },
            error: function (request, status, error) { },
            complete: function () { }
        });
    }
</script>

<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <h2 class="float-md-left">AWH Clockwork Project @ViewData["Version"] on @ViewData["Runtime"]!</h2>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <div class="mt-5">
                <button type="button" class="btn btn-success btn-block" onclick="GetTime()">
                    Get the Time
                </button>
                <button type="button" class="btn btn-success btn-block" onclick="GetListPartial()">
                    Load Time Logs
                </button>

            </div>
            <div class="form-group mt-5">
                @Html.DropDownListFor(x => Model.SelectedTimezone, new SelectList(Model.Timezones, "Value", "Text"), htmlAttributes: new { @class = "form-control", id = "timezone" })
                <button type="button" class="btn btn-success btn-block" onclick="GetTime()">
                    Get Time from selected timezone
                </button>
                @*<select asp-items="@Model" class="form-control" id="timezone"></select>*@
            </div>
        </div>
        <div class="col-md-8">
            <div id="GridContainer">
            </div>
        </div>

    </div>
</div>



